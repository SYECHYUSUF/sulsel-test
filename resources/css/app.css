@import "tailwindcss";
@variant dark (&:where(.dark, .dark *));

/* 1. SISTEM THEME & GOLDEN RATIO */
@theme {
    /* Brand Identity PPID Sulsel - New Palette */
    --color-ppid-primary: #1a305e;
    /* Midnight Navy */
    --color-ppid-accent: #d4af37;
    /* Metalic Gold */
    --color-ppid-secondary: #4a5568;
    /* Slate Gray */

    /* Legacy mapping (optional, to keep some things working before full refactor) */
    --color-ppid-purple: #1a305e;
    /* Mapped to Navy */
    --color-ppid-dark: #122143;

    --color-background: #ffffff;
    --color-foreground: #1a305e;
    /* Dark Navy for text */

    /* Spacing & Sizing - Berdasarkan Rumus Golden Ratio (Phi) */
    --spacing-golden-1: 8px;
    --spacing-golden-2: 13px;
    /* 8 * 1.618 */
    --spacing-golden-3: 21px;
    /* 13 * 1.618 */
    --spacing-golden-4: 34px;
    /* 21 * 1.618 */
    --spacing-golden-5: 55px;
    /* 34 * 1.618 */
    --spacing-golden-6: 89px;
    /* 55 * 1.618 */

    /* Skala Tipografi Golden Ratio */
    --text-base: 16px;
    --text-md: 20px;
    /* 16 * 1.25 */
    --text-lg: 25px;
    /* 20 * 1.25 */
    --text-xl: 31px;
    /* 25 * 1.25 */
    --text-2xl: 39px;
    /* 31 * 1.25 */
}

/* 2. OPTIMASI BASE LAYER */
@layer base {
    html {
        scroll-behavior: smooth;
        scrollbar-gutter: stable;
    }

    body {
        @apply bg-background text-foreground antialiased transition-colors duration-300;
        font-family: "Plus Jakarta Sans", system-ui, sans-serif;
        line-height: 1.618;
        /* Standard Readability Golden Ratio */
    }

    /* Hirarki Heading dengan Proporsi Golden Ratio */
    h1 {
        @apply text-2xl font-extrabold tracking-tight leading-[1.2];
    }

    h2 {
        @apply text-xl font-bold tracking-tight leading-tight;
    }

    h3 {
        @apply text-lg font-bold leading-snug;
    }

    h4 {
        @apply text-md font-bold leading-normal;
    }

    p {
        @apply text-base leading-relaxed;
    }

    button,
    input {
        @apply transition-all duration-200;
    }
}

/* 3. LOGIKA AKSESIBILITAS (Identik dengan theme.css) */
@layer utilities {
    /* Kontras & Warna */
    .high-contrast {
        filter: contrast(1.5) !important;
    }

    .monochrome {
        filter: grayscale(100%) !important;
    }

    /* Tipografi Khusus */
    .dyslexic-font * {
        font-family: "Comic Sans MS", "OpenDyslexic", sans-serif !important;
    }

    .bold-text * {
        font-weight: 800 !important;
    }

    /* Highlight Visual */
    .highlight-links a {
        @apply underline decoration-2 underline-offset-4 bg-blue-100 px-1 rounded;
    }

    .highlight-titles h1,
    .highlight-titles h2,
    .highlight-titles h3 {
        @apply bg-yellow-100 px-2 py-1 rounded-lg;
    }

    /* Efek Glassmorphism Premium */
    .glass {
        @apply bg-white/30 backdrop-blur-xl border border-white/20 shadow-xl;
    }

    /* NEW: Accessibility Features */
    .acc-cursor-big,
    .acc-cursor-big * {
        cursor:
            url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="black" stroke="white" stroke-width="1.5"><path d="M5.5 3.2L12 19.5l3.5-7.5 7.5-3.5L5.5 3.2z"/></svg>')
                0 0,
            auto !important;
    }

    .acc-mask-mode {
        position: relative;
    }

    .acc-mask-mode::after {
        content: "";
        position: fixed;
        top: 50%;
        left: 0;
        width: 100vw;
        height: 15vh;
        background: rgba(0, 0, 0, 0.5);
        box-shadow: 0 0 0 100vh rgba(0, 0, 0, 0.7);
        transform: translateY(-50%);
        pointer-events: none;
        z-index: 99999;
    }

    .reduce-motion * {
        animation: none !important;
        transition: none !important;
    }

    .speech-mode * {
        cursor: help !important;
    }

    /* Guide Line */
    .acc-reading-guide::before {
        content: "";
        position: fixed;
        top: 50%;
        left: 0;
        width: 100%;
        height: 4px;
        background: red;
        z-index: 100000;
        pointer-events: none;
    }

    /* Dark Mode Support */
    :root.dark {
        --color-background: #0f172a;
        --color-foreground: #f8fafc;
        --color-ppid-primary: #f8fafc;
        --color-ppid-accent: #fbbf24;
        --color-ppid-secondary: #cbd5e1;
    }
}

/* 4. ANIMASI OPTIMIZED */
@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(21px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.animate-slide-up {
    animation: slideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}
